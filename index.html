<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday, Disha!</title>
    <!-- Load Tailwind CSS via CDN --><script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define the Inter font family */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f3f9; /* Soft Lavender/Pink base */
        }

        /* Custom Confetti Animation */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: transparent;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            animation: fall 3s linear forwards;
        }

        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Responsive background gradient for a celebratory look */
        .celebration-bg {
            background: linear-gradient(135deg, #fce3e7 0%, #ffffff 50%, #f7e0fc 100%);
        }

        /* Heart animation using pseudo-elements */
        .heart-icon {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Star Map Image Styling */
        .star-image-placeholder { 
            background-color: #1a1a2e; /* Deep space color */
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .star-image-placeholder:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }
        
        /* Memory Card Styling */
        .memory-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .memory-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(168, 85, 247, 0.2);
        }

        /* Video Placeholder Styling - Now the click area */
        .video-placeholder {
            width: 100%;
            height: 180px; /* Adjust height as needed for videos */
            background-color: #e2e8f0; /* Light gray background for video area */
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b; /* Text color for play icon */
            font-size: 2.5rem; /* Size of the play icon */
            overflow: hidden; 
            transition: background-color 0.3s;
        }
        .video-placeholder:hover {
            background-color: #cbd5e1;
        }

    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 celebration-bg">

    <!-- Main Card Container --><div id="main-content" class="w-full max-w-4xl bg-white shadow-2xl rounded-3xl p-6 sm:p-10 transition-all duration-300 transform scale-100 opacity-100">

        <!-- Header Section - Always visible but centered per page --><header class="text-center mb-10">
            <h1 class="text-6xl font-extrabold text-pink-600 mb-2 sm:text-7xl">
                Happy Birthday!
            </h1>
            <p class="text-xl text-gray-700 font-light italic">
                A special day for a special person.
            </p>
        </header>

        <!-- Initial Interaction/Welcome Section (Page 0) --><div id="welcome-section" class="text-center space-y-6">
            <p class="text-2xl text-purple-600 font-semibold">
                Welcome, Dishaaa!
            </p>
            <p class="text-gray-600 max-w-xl mx-auto">
                Click below to unlock your personalized birthday message and start the celebration!
            </p>
            
            <div class="flex justify-center pt-4">
                <button id="start-button" class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-all duration-300 active:scale-95 text-lg flex items-center justify-center mx-auto">
                    <svg class="w-6 h-6 mr-2 heart-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>
                    Start the Celebration!
                </button>
            </div>
        </div>

        <!-- Hidden Message/Main Content Section (Page 1) --><div id="message-section" class="hidden pt-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
                
                <div class="lg:col-span-1 flex justify-center items-center">
                    <div class="w-64 h-64 bg-gray-100 rounded-2xl overflow-hidden shadow-xl border-4 border-pink-300 p-2 transform hover:scale-105 transition-transform duration-500">
                        

<div class="w-full h-full flex items-center justify-center bg-pink-100/50 rounded-xl">
                            <!-- UPDATED IMAGE SOURCE HERE -->
                            <img src="https://res.cloudinary.com/dhonsc5ao/image/upload/v1761766140/_disha_kingrani__1686248502_3120801093215998712_32906898629_cdj6wk.jpg" alt="A lovely photo of Salome" class="w-full h-full object-cover rounded-xl"/>
                        </div>
                    </div>
                </div>

                <!-- Right Column: The Message --><div class="lg:col-span-2 space-y-6">
                    <h2 class="text-4xl font-bold text-purple-700">
                        Dearest Disha,
                    </h2>
                    <p class="text-gray-700 leading-relaxed text-lg">
                        It's your day!

I hope today feels easy ‚Äî like the kind of day where everything just flows right.
Where your favorite song plays out of nowhere, the food tastes amazing, and you can't help but smile for no reason at all.

You make things around you a little brighter without even realizing it. It's like your presence quietly adds color to everything ‚Äî and that's honestly kind of magical.
                    </p>
                    <p class="text-gray-700 leading-relaxed text-lg">
                        So here's to you ‚Äî
To your laugh, your spark, your weird little habits, and all the small things that make you, you.

May this year bring a thousand tiny moments that feel just right ‚Äî new memories, new adventures, and people who make you laugh till your cheeks hurt.

So go have fun, eat your favorite food, take way too many pictures, and let today be about nothing but joy.

You deserve that kind of day.
And hey, the world's a little better today ‚Äî because you're in it. üí´
                    </p>
                    <p class="text-gray-700 leading-relaxed text-lg font-semibold italic border-l-4 border-pink-500 pl-4 py-1 bg-pink-50/50 rounded-md">
                        Let's make this next year the greatest one yet! Happy Birthday!
                    </p>
                    
                    <div class="pt-4 text-right">
                        <p class="text-xl font-bold text-pink-600">
                            With all my love,
                        </p>
                        <p class="text-lg text-gray-500">
                            Rishi
                        </p>
                    </div>
                </div>
            </div>

            <!-- Fun Fact/Memory Section --><div class="mt-12 text-center bg-purple-50 p-6 rounded-xl shadow-inner">
                <h3 class="text-2xl font-bold text-purple-600 mb-3">Matter of Fact</h3>
                <p class="text-gray-700 italic">
                    Thank you for existing ü•π
                </p>
            </div>
            
            <!-- Navigation Buttons --><div class="mt-8 flex justify-center space-x-4 flex-wrap">
                <button id="to-star-map-button" class="bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transform transition-all duration-300 active:scale-95 text-md mb-2">
                    Discover the Night Sky ‚Üí
                </button>
                <button id="to-welcome-button-from-message" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-full shadow-md transform transition-all duration-300 active:scale-95 text-md mb-2">
                    ‚Üê Back to Start
                </button>
            </div>
        </div>

        <!-- Star Map Section (Page 2) --><div id="star-map-section" class="hidden pt-8">
            <header class="text-center mb-8">
                <h2 class="text-5xl font-extrabold text-indigo-700 mb-4 sm:text-6xl">
                    Your Night of Birth
                </h2>
                <p class="text-xl text-gray-700 font-light italic max-w-2xl mx-auto">
                    Well i did some digging, and it turns out. That's how the sky looked like on the night when you were born, over Jalgaon, on October 30, 2004.
                </p>
            </header>

            <!-- Image Gallery Container --><div class="space-y-12 mb-8">

                <div class="space-y-4">
                    <img src="https://res.cloudinary.com/dhonsc5ao/image/upload/v1761765965/Screenshot_2025-10-29_224545_whbn1j.png" 
                        class="star-image w-full h-[400px] sm:h-[600px] object-cover rounded-xl cursor-pointer fullscreen-trigger" 
                        alt="Star map of the night sky over Jalgaon, Maharashtra on October 30, 2004."
                        onclick="showFullscreenContent(this.src, 'image')"
                    />
                    <p class="text-center text-xl font-medium text-gray-800 border-b-2 border-indigo-200 pb-2 italic">
                        Main star map view
                    </p>
                </div>
                
                

<div class="space-y-4">
                    <img src="https://res.cloudinary.com/dhonsc5ao/image/upload/v1761765992/Screenshot_2025-10-29_224615_grli6o.png" 
                        class="star-image w-full h-[400px] sm:h-[600px] object-cover rounded-xl cursor-pointer fullscreen-trigger" 
                        alt="Constellation Art image placeholder."
                        onclick="showFullscreenContent(this.src, 'image')"
                    />
                    <p class="text-center text-xl font-medium text-gray-800 border-b-2 border-indigo-200 pb-2 italic">
                        Clear Star map View
                    </p>
                </div>

                

<div class="space-y-4">
                    <img src="https://res.cloudinary.com/dhonsc5ao/image/upload/v1761766011/Screenshot_2025-10-29_224650_npyvs1.png" 
                        class="star-image w-full h-[400px] sm:h-[600px] object-cover rounded-xl cursor-pointer fullscreen-trigger" 
                        alt="Planetary alignment image placeholder."
                        onclick="showFullscreenContent(this.src, 'image')"
                    />
                    <p class="text-center text-xl font-medium text-gray-800 border-b-2 border-indigo-200 pb-2 italic">
                        Star Constellation View
                    </p>
                </div>

                

<div class="space-y-4">
                    <img src="https://res.cloudinary.com/dhonsc5ao/image/upload/v1761766030/Screenshot_2025-10-29_224720_kfjn1o.png" 
                        class="star-image w-full h-[400px] sm:h-[600px] object-cover rounded-xl cursor-pointer fullscreen-trigger" 
                        alt="Zodiac sign image placeholder."
                        onclick="showFullscreenContent(this.src, 'image')"
                    />
                    <p class="text-center text-xl font-medium text-gray-800 border-b-2 border-indigo-200 pb-2 italic">
                        Star Constellation Art View 
                    </p>
                </div>
            </div>
            
            <!-- Source Link Placeholder --><div class="mt-8 mb-12 p-4 bg-indigo-50 rounded-lg border border-indigo-300">
                <h4 class="text-lg font-semibold text-indigo-700 mb-2">Source of Information</h4>
                <p class="text-gray-700 italic">
                    <span class="font-bold">https://stellarium-web.org/</span> 
                </p>
            </div>

            <!-- Navigation Button to go back and to memories --><div class="text-center flex justify-center space-x-4">
                <button id="to-message-button-from-star" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-6 rounded-full shadow-md transform transition-all duration-300 active:scale-95 text-md flex items-center justify-center mx-auto">
                    ‚Üê Back to Message
                </button>
                 <button id="to-memories-button-from-star" class="bg-gradient-to-r from-teal-400 to-blue-500 hover:from-teal-500 hover:to-blue-600 text-white font-bold py-2 px-6 rounded-full shadow-md transform transition-all duration-300 active:scale-95 text-md flex items-center justify-center mx-auto">
                    Something Special ‚Üí
                </button>
            </div>
        </div>
        
        <!-- Memories Section (Page 3) - NOW WITH SIX VIDEO SLOTS -->
        <div id="memories-section" class="hidden pt-8 text-center space-y-8">
            <h2 class="text-5xl font-extrabold text-teal-600 mb-4">
                Something special
            </h2>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-8">
                Don't even ask why i put these here üòÖ
            </p>

            <!-- Updated Grid to show 6 videos -->
            <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                
                

                <!-- Video 4 (Dharma 1) - New link added -->
                <div class="memory-card bg-white p-2 sm:p-4 rounded-xl shadow-lg border-t-4 border-red-400 flex flex-col justify-between">
                    <p class="text-xs sm:text-sm font-semibold text-gray-600 mb-2">Video 1</p>
                    <div class="video-placeholder flex-grow mb-2 sm:mb-4 cursor-pointer fullscreen-trigger"
                         data-type="video" 
                         data-src="https://player.vimeo.com/video/1131808408?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479"
                         onclick="showFullscreenContent(this.dataset.src, 'video')"
                    >
                        <svg class="w-12 h-12 sm:w-16 sm:h-16 play-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                    </div>
                </div>

                <!-- Video 5 (Dharma 2) - New link added -->
                <div class="memory-card bg-white p-2 sm:p-4 rounded-xl shadow-lg border-t-4 border-yellow-400 flex flex-col justify-between">
                    <p class="text-xs sm:text-sm font-semibold text-gray-600 mb-2">Video 2</p>
                    <div class="video-placeholder flex-grow mb-2 sm:mb-4 cursor-pointer fullscreen-trigger"
                         data-type="video" 
                         data-src="https://player.vimeo.com/video/1131808476?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479"
                         onclick="showFullscreenContent(this.dataset.src, 'video')"
                    >
                        <svg class="w-12 h-12 sm:w-16 sm:h-16 play-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                    </div>
                </div>

                <!-- Video 6 (Dharma 3) - New link added -->
                <div class="memory-card bg-white p-2 sm:p-4 rounded-xl shadow-lg border-t-4 border-blue-400 flex flex-col justify-between">
                    <p class="text-xs sm:text-sm font-semibold text-gray-600 mb-2">Video 3</p>
                    <div class="video-placeholder flex-grow mb-2 sm:mb-4 cursor-pointer fullscreen-trigger"
                         data-type="video" 
                         data-src="https://player.vimeo.com/video/1131808507?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479"
                         onclick="showFullscreenContent(this.dataset.src, 'video')"
                    >
                        <svg class="w-12 h-12 sm:w-16 sm:h-16 play-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                    </div>
                </div>
            </div>

           <div class="pt-6 flex justify-center space-x-4">
                <button id="to-star-button-from-memories" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-6 rounded-full shadow-md transform transition-all duration-300 active:scale-95 text-md flex items-center justify-center mx-auto">
                    ‚Üê Back to Night Sky
                </button>
                <button id="to-act-button-from-memories" class="bg-gradient-to-r from-teal-400 to-blue-500 hover:from-teal-500 hover:to-blue-600 text-white font-bold py-2 px-6 rounded-full shadow-md transform transition-all duration-300 active:scale-95 text-md flex items-center justify-center mx-auto">
                    A Special Act ‚Üí
                </button>
            </div>
        </div>

        <!-- Special Act Section (Page 4) -->
        <div id="special-act-section" class="hidden pt-8 text-center space-y-8">
            <h2 class="text-5xl font-extrabold text-pink-600 mb-4">
                A Special Act üåü
            </h2>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-8">
                
            </p>

            <div class="max-w-xl mx-auto memory-card bg-white p-6 rounded-xl shadow-lg border-t-4 border-pink-400 flex flex-col justify-between">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4">Your Video Surprise</h3>
                <!-- Placeholder for the video preview -->
                <div class="video-placeholder flex-grow mb-4 h-[300px] cursor-pointer fullscreen-trigger"
                     data-type="video" 
                     data-src="https://player.vimeo.com/video/1131804009?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479"
                     onclick="showFullscreenContent(this.dataset.src, 'video')"
                >
                    <!-- Play/Pause Icon -->
                    <svg class="w-20 h-20 play-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                </div>
            </div>

            <div class="pt-6 flex justify-center space-x-4">
                <button id="to-memories-button-from-act" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-6 rounded-full shadow-md transform transition-all duration-300 active:scale-95 text-md">
                    ‚Üê Back to Memories
                </button>
                <button id="to-ending-button-from-act" class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-2 px-6 rounded-full shadow-lg transform transition-all duration-300 active:scale-95 text-md">
                    Final Words ‚Üí
                </button>
            </div>
        </div>

        <!-- Ending Section (Page 5) - YOUR TEXT IS HERE -->
        <div id="ending-section" class="hidden pt-8 text-center space-y-8">
            <p class="text-2xl font-bold text-purple-700 mb-4">A Final Note</p>

            <div class="max-w-3xl mx-auto p-10 bg-pink-50 rounded-xl shadow-lg border-2 border-pink-300 text-gray-800 leading-relaxed text-lg text-left space-y-4">
                <!-- Restored Final Words Message -->
                <p>
                    Soo‚Ä¶ if you're reading this, that means you actually made it all the way here ‚Äî through the stars, the wierd videos, and all my questionable design choices.
                </p>
                <p>
                    I could've just sent a simple 'Happy Birthday' text, but nah‚Ä¶ you know me ‚Äî I had to go full dramatic mode.
                </p>
                <p>
                    This little site‚Ä¶ is kinda my way of saying that you deserve something that stays more than a notificaion. Something you can open anytime and smile, even if just a little.
                </p>
                <p>
                    Every page here ‚Äî every detail ‚Äî it's all built just to make you stop for a second and feel good about you. Because honestly, you've come a long way.
                </p>
                <p>
                    But hey, no getting emotional, okay? This is supposed to be fun. So go on ‚Äî explore, laugh a little, roll your eyes if you have to.
                </p>
                <p>
                    And when you're done ‚Äî just remember, there's someone out here who genuinely hopes this birthday feels lighter, brighter, and a little more you.
                </p>
                <p class="font-semibold text-pink-600 italic mt-6">
                    Anyway, before I start sounding like a motivational speaker ‚Äî happy almost birthday, delusional Disha. <B>And Remember, Power is an illusion</B>
                </p>
            </div>
            
            <div class="pt-6 flex justify-center space-x-4">
                <button id="to-act-button-from-ending" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-6 rounded-full shadow-md transform transition-all duration-300 active:scale-95 text-md">
                    ‚Üê Back to Special Act
                </button>
                <button id="to-welcome-button-from-ending" class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-2 px-6 rounded-full shadow-lg transform transition-all duration-300 active:scale-95 text-md">
                    Return to Start
                </button>
            </div>
        </div>

    </div>

    <!-- Hidden Fullscreen Modal (Lightbox) -->
    <div id="fullscreen-modal" class="fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4 transition-opacity duration-300 opacity-0 pointer-events-none" onclick="hideFullscreenContent()">
        
        <!-- Modal Content Area -->
        <div class="relative w-full h-full max-w-6xl max-h-[90vh] flex items-center justify-center" onclick="event.stopPropagation()">
            
            <!-- Close Button -->
            <button onclick="hideFullscreenContent()" class="absolute top-4 right-4 text-white text-3xl font-bold p-2 bg-gray-800 rounded-full hover:bg-red-600 transition-colors z-50" aria-label="Close Fullscreen">&times;</button>
            
            <!-- Content Holder (Image or Video Placeholder) -->
            <div id="modal-content-area" class="w-full h-full bg-gray-900 rounded-xl overflow-hidden shadow-2xl flex items-center justify-center">
                <p class="text-white text-lg">Loading content...</p>
            </div>
        </div>
    </div>

    <!-- JavaScript for Interactivity and Confetti -->
    <script>
        const startButton = document.getElementById('start-button');
        const mainContent = document.getElementById('main-content');
        
        // Sections
        const welcomeSection = document.getElementById('welcome-section');
        const messageSection = document.getElementById('message-section');
        const starMapSection = document.getElementById('star-map-section');
        const memoriesSection = document.getElementById('memories-section'); 
        const specialActSection = document.getElementById('special-act-section'); 
        const endingSection = document.getElementById('ending-section'); 

        // Nav Buttons (Variables remain the same as previous)
        const toStarMapButton = document.getElementById('to-star-map-button');
        const toMessageButtonFromStar = document.getElementById('to-message-button-from-star');
        const toWelcomeButtonFromMessage = document.getElementById('to-welcome-button-from-message'); 
        const toMemoriesButtonFromStar = document.getElementById('to-memories-button-from-star');
        const toStarButtonFromMemories = document.getElementById('to-star-button-from-memories'); 
        // --- THIS LINE IS ESSENTIAL (1/2) ---
        const toActButtonFromMemories = document.getElementById('to-act-button-from-memories'); 
        // -------------------------------------
        const toMemoriesButtonFromAct = document.getElementById('to-memories-button-from-act'); 
        const toEndingButtonFromAct = document.getElementById('to-ending-button-from-act'); 
        const toActButtonFromEnding = document.getElementById('to-act-button-from-ending'); 
        const toWelcomeButtonFromEnding = document.getElementById('to-welcome-button-from-ending'); 

        // Modal Variables
        const fullscreenModal = document.getElementById('fullscreen-modal');
        const modalContentArea = document.getElementById('modal-content-area');

        // Confetti Config
        const confettiColors = ['#ff7e5f', '#feb47b', '#86a8e7', '#91d18b', '#ffc1cc'];
        const numConfetti = 50;
        const duration = 2000; // 2 seconds

        /**
         * Generates and animates confetti particles.
         */
        function launchConfetti() {
            for (let i = 0; i < numConfetti; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                confetti.style.left = `${Math.random() * 100}vw`;
                
                confetti.style.backgroundColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                
                const size = Math.floor(Math.random() * 10) + 5;
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;

                confetti.style.animationDuration = `${Math.random() * 2 + 2}s`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;

                document.body.appendChild(confetti);

                setTimeout(() => {
                    confetti.remove();
                }, duration + 1000); 
            }
        }

        /**
         * Switches the active page/section in the single-file app.
         * @param {string} pageId - The ID of the section to show.
         */
        function showPage(pageId) {
            const sections = {
                'welcome': welcomeSection,
                'message': messageSection,
                'starmap': starMapSection,
                'memories': memoriesSection,
                'specialact': specialActSection,
                'ending': endingSection
            };

            // Hide all sections
            Object.values(sections).forEach(section => section.classList.add('hidden'));

            if (sections[pageId]) {
                mainContent.classList.remove('scale-100', 'opacity-100');
                mainContent.classList.add('scale-95', 'opacity-0');

                setTimeout(() => {
                    sections[pageId].classList.remove('hidden');
                    
                    if (pageId === 'welcome') { 
                        startButton.disabled = false;
                    }

                    mainContent.classList.remove('scale-95', 'opacity-0');
                    mainContent.classList.add('scale-100', 'opacity-100');
                }, 300);
            }
        }

        /**
         * Shows the fullscreen modal with dynamic content.
         * @param {string} src - The source URL for the image or video iframe.
         * @param {string} type - 'image' or 'video'.
         */
        function showFullscreenContent(src, type) {
            if (!src || src.includes('PASTE_YOUR')) {
                // Display a friendly message if the user hasn't replaced the placeholder yet
                fullscreenModal.classList.remove('opacity-0', 'pointer-events-none');
                fullscreenModal.classList.add('opacity-100');
                modalContentArea.innerHTML = `
                    <div class="p-8 text-center bg-white rounded-xl shadow-lg max-w-sm">
                        <p class="text-xl font-bold text-red-600 mb-4">Content Missing!</p>
                        <p class="text-gray-700">Please replace the placeholder text in the editor (e.g., "PASTE_YOUR...") with a valid public image or video link.</p>
                    </div>
                `;
                return;
            }

            modalContentArea.innerHTML = ''; // Clear previous content

            if (type === 'image') {
                const img = document.createElement('img');
                img.src = src;
                img.alt = 'Fullscreen View';
                // Fallback using onerror in case the public link fails
                img.onerror = function() {
                    this.onerror=null; 
                    this.src='https://placehold.co/1200x800/8b5cf6/ffffff?text=Image+Load+Error';
                    modalContentArea.innerHTML = `<div class="p-8 text-center bg-white rounded-xl shadow-lg max-w-sm">
                        <p class="text-xl font-bold text-red-600 mb-4">Image Loading Failed</p>
                        <p class="text-gray-700">Please check the URL you pasted in the code. Using a placeholder image instead.</p>
                    </div>`;
                    modalContentArea.appendChild(img);
                };
                img.classList.add('w-full', 'h-full', 'object-contain', 'rounded-xl');
                modalContentArea.appendChild(img);
                
            } else if (type === 'video') {
                // For videos, embed an iframe using the data-src as the source
                const videoHtml = `
                    <div class="w-full h-full flex flex-col items-center justify-center p-4">
                        <div class="w-full max-w-4xl h-0 relative rounded-xl shadow-2xl" style="padding-bottom: 56.25%;">
                            <!-- This iframe holds the public video embed, which is necessary for fullscreen -->
                            <iframe 
                                src="${src}" 
                                class="absolute top-0 left-0 w-full h-full rounded-xl border-4 border-purple-500" 
                                allow="autoplay; encrypted-media; fullscreen"
                                allowfullscreen 
                                title="Video Placeholder"
                            ></iframe>
                        </div>
                        <p class="text-gray-400 text-sm mt-4 text-center">
                            The video should now be viewable fullscreen. Use a YouTube/Vimeo **embed** link for best results.
                        </p>
                    </div>
                `;
                modalContentArea.innerHTML = videoHtml;
            }

            fullscreenModal.classList.remove('opacity-0', 'pointer-events-none');
            fullscreenModal.classList.add('opacity-100');
        }

        /**
         * Hides the fullscreen modal.
         */
        function hideFullscreenContent() {
            fullscreenModal.classList.remove('opacity-100');
            fullscreenModal.classList.add('opacity-0', 'pointer-events-none');
            // Stop any playing video by removing the iframe content
            setTimeout(() => {
                modalContentArea.innerHTML = '<p class="text-white text-lg">Loading content...</p>';
            }, 300);
        }

        // --- Global Event Listeners ---

        startButton.addEventListener('click', () => {
            launchConfetti();
            startButton.disabled = true;
            setTimeout(() => showPage('message'), 500); 
        });

        // Navigation from Message Section (Page 1)
        toStarMapButton.addEventListener('click', () => showPage('starmap'));
        toWelcomeButtonFromMessage.addEventListener('click', () => showPage('welcome'));

        // Navigation from Star Map Section (Page 2)
        toMessageButtonFromStar.addEventListener('click', () => showPage('message'));
        toMemoriesButtonFromStar.addEventListener('click', () => showPage('memories'));
        
        // Navigation from Memories Section (Page 3)
        toStarButtonFromMemories.addEventListener('click', () => showPage('starmap'));
        // --- THIS LINE IS ESSENTIAL (2/2) ---
        toActButtonFromMemories.addEventListener('click', () => showPage('specialact'));
        // -------------------------------------

        // Navigation from Special Act Section (Page 4)
        toMemoriesButtonFromAct.addEventListener('click', () => showPage('memories'));
        toEndingButtonFromAct.addEventListener('click', () => showPage('ending'));

        // Navigation from Ending Section (Page 5)
        toActButtonFromEnding.addEventListener('click', () => showPage('specialact'));
        toWelcomeButtonFromEnding.addEventListener('click', () => {
            launchConfetti();
            showPage('welcome');
        });


        // Initialize the first page view
        window.onload = () => showPage('welcome');

    </script>
</body>
</html>